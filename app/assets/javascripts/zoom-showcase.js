(function(e){e.zoomShowcase=function(c){function ja(a){a.stopPropagation();M<t?M++:(B&&B.remove(),b[0].fadeTo(500,1,ka),B=M=null)}function ka(){for(var a=0;a<C;a++)e("<div />").css({position:"absolute",top:0,left:0,width:x,height:y}).css("background-color","#000").prependTo(b[a]);j=1;k=t;b[j].fadeTo(500,1);b[k].fadeTo(500,1,la)}function la(){b[1].css("cursor","pointer").mouseenter(u).mouseleave(v);b[t].css("cursor","pointer").mouseenter(u).mouseleave(v);for(var a=C;a--;)b[a].show();X&&e("#zoom-gallery").mouseenter(ma).mouseleave(na); Y();C=null}function ma(){N=!0;p&&clearTimeout(p)}function na(){N=!1;H&&(p=setTimeout(r,Z))}function u(){e(this).data("image").fadeTo(250,1)}function v(){e(this).data("image").stop(!0,!0).fadeTo(250,D)}function O(a){a.stopPropagation();p&&clearTimeout(p);H=!1;f=d>0?d-1:t;k=f>0?f-1:t;w=d<t?d+1:0;j=d;b[f].unbind("click",O);b[w].unbind("click",r);b[k].css("z-index",1);b[j].css("z-index",2);$()}function r(a){isNaN(a)&&typeof a!=="undefined"&&a.stopPropagation();p&&clearTimeout(p);H=!1;f=d<t?d+1:0;k=d; w=d>0?d-1:t;j=f<t?f+1:0;b[f].unbind("click",r);b[w].unbind("click",O);b[k].css("z-index",2);b[j].css("z-index",1);$()}function $(){b[d].css("cursor","auto").unbind("click",aa);d=f;I=!0;if(q!=null){for(;q.length;)q[0].stop(),q[0].remove(),q.shift();h=q=null}b[f].unbind("mouseenter",u).unbind("mouseleave",v).css({zIndex:3,cursor:"auto"}).animate({left:ba,top:0,width:x,height:y},n,m);s[f].stop(!0).animate({width:x,height:y,opacity:1},n,m);b[w].unbind("mouseenter",u).unbind("mouseleave",v).css({zIndex:0, cursor:"auto"}).animate({left:ca,top:da,width:E,height:F},n,m);s[w].animate({width:E,height:F},n,m);b[k].css("cursor","pointer").mouseenter(u).mouseleave(v).animate({left:0,top:J,width:z,height:A},n,m);s[k].animate({width:z,height:A,opacity:D},n,m);b[j].css("cursor","pointer").mouseenter(u).mouseleave(v).animate({left:ea,top:J,width:z,height:A},n,m);s[j].animate({width:z,height:A,opacity:D},n,m,Y)}function Y(){b[j].click(r);b[k].click(O);G[d]!==0&&b[d].css("cursor","pointer").click(aa);I=!1;K[d]!== 0?(h=K[d],P=h.content.length-1,Q=h.align,q=[],l=0,R()):S()}function aa(){oa==="_parent"?window.location=G[d]:window.open(G[d])}function S(){X&&!I&&!N&&(p=setTimeout(r,Z));H=!0}function R(){if(!I){var a=h.content[l];if(a===0)l<P?(l++,R()):S();else{var c,f,i=e("<div />").html(a).addClass("zoom-gallery-info-text").appendTo(b[d]);fa&&(L=parseInt(i.css("padding-left"),10)+parseInt(i.css("padding-right"),10),ga=parseInt(i.css("padding-top"),10)+parseInt(i.css("padding-bottom"),10),fa=!1);c=i.height()+ga; a=i.width();i.css(h.style[l]).css({left:Q==="left"?h.position[l].x:x-a-L-h.position[l].x,top:h.position[l].y}).find("a").each(function(){e(this).css(h.style[l])});q[l]=i;l<P?(l++,f=R):f=S;a+=L;Q==="left"?i.css("clip","rect(0px, 0px, "+c+"px, 0px)").animate({clip:"rect(0px, "+(i.width()+L)+"px, "+c+"px, 0px)"},250,f):i.css("clip","rect(0px, "+a+"px, "+c+"px, "+a+"px)").animate({clip:"rect(0px, "+a+"px, "+c+"px, 0px)"},250,f)}}}var b=[],s=[],G=[],K=[],m=c.easing,oa=c.linkTarget,x=c.imageWidth,y=c.imageHeight, ha=c.bannerWidth,D=c.sideOpacity,pa=c.randomizeItems,n=c.animationSpeed,Z=c.autoPlayDelay,T=c.backZoom,U=c.sideZoom,X=c.autoPlay,z=x*U|0,A=y*U|0,E=x*T|0,F=y*T|0,V=ha*0.5|0,W=y*0.5|0,ia=e("#zoom-gallery > ul > li"),C=ia.length,H=!1,N=!1,I=!1,fa=!0,t=C-1,M=0,d=0,k,w,j,f,B,h,P,Q,l,q,L,ga,p,ea=ha-z,ba=V-(x*0.5|0),ca=V-(E*0.5|0),J=W-(A*0.5|0),da=W-(F*0.5|0);(function(){if(C>3){var a=e("#zoom-gallery"),c,d,i,f,l,h,j,k,o=C,p=[],q=[],n=[],m=[];B=a.find(".preloader");B.length&&B.css({left:V-(parseInt(B.attr("width"), 10)*0.5|0),top:W-(parseInt(B.attr("height"),10)*0.5|0),display:"block"});a.css("height",y+20);a.find("ul").css("display","block");ia.each(function(a){p[a]=e(this).css("position","absolute").hide();c=e("<img />").css({position:"absolute",top:0,left:0}).load(ja).appendTo(e(this));q[a]=c;e(this).data("image",c);ul=e(this).find("ul");ul.length?(ul.attr("title")?m[a]=ul.attr("title"):m[a]=0,ul.attr("class")?(h=ul.attr("class").toLowerCase(),h.search("-")!==-1?h=h.split("-")[1]:h="left"):h="left"):(m[a]= 0,h="left");d=e(this).find("li");d.length?(i=[],j=[],k=[],d.each(function(a){d.html()!=""?e(this).attr("class")?(l=e(this).attr("class").toLowerCase(),l.search("x")!==-1?(f=e(this).attr("class").split("x"),i[a]=e(this).html(),j[a]={x:parseInt(f[0],10),y:parseInt(f[1],10)},k[a]={color:e(this).css("color"),backgroundColor:e(this).css("background-color")}):(i[a]=0,j[a]=0,k[a]=0)):(i[a]=0,j[a]=0,k[a]=0):(i[a]=0,j[a]=0,k[a]=0)}),n[a]={content:i,position:j,style:k,align:h}):n[a]=0});if(pa){var a=[],u=[], v=[],w=[],g,r;for(g=0;g<C;g++)a[g]=p[g],u[g]=q[g],v[g]=m[g],w[g]=n[g];for(;a.length>0;)g=Math.random()*a.length|0,r=b.length,b[r]=a[g],s[r]=u[g],G[r]=v[g],K[r]=w[g],a.splice(g,1),u.splice(g,1),v.splice(g,1),w.splice(g,1)}else b=p,s=q,G=m,K=n;for(;o--;){switch(o){case 0:b[o].css({left:ba,top:0,width:x,height:y,zIndex:3});s[o].attr("width",x).attr("height",y);break;case 1:b[o].css({left:ea,top:J,width:z,height:A,zIndex:1});s[o].css("opacity",D).attr("width",z).attr("height",A);break;case t:b[o].css({left:0, top:J,width:z,height:A,zIndex:2});s[o].css("opacity",D).attr("width",z).attr("height",A);break;default:b[o].css({left:ca,top:da,width:E,height:F,xIndex:0}),s[o].attr("width",E).attr("height",F)}s[o].attr("src",b[o].attr("title"));b[o].removeAttr("title")}}else alert("ZoomShowcase requires at least 4 images to work correctly")})(c.bannerWidth);T=U=c=null}})(jQuery);